{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [],
   "source": [
    "import spacy"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Text Preprocessing Pkg\n",
    "from spacy.lang.en.stop_words import STOP_WORDS\n",
    "from string import punctuation"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Build a List of Stopwords\n",
    "stopwords = list(STOP_WORDS)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [],
   "source": [
    "document1 =\"Mahatma Gandhi was a great freedom fighter who spent his whole life in struggle for the independence of India. He was born in the Indian Hindu family on 2nd of October in 1869 in the Porbander, Gujarat. He lived his whole as a leader of the Indian people. His whole life story is a great inspiration for us. He is called as the Bapu or Rashtrapita as he spent his life in fighting against British rule for the freedom of us. While fighting with Britishers he took help of his great weapons like non-violence and Satyagraha movements to achieve freedom. Many times he got arrested and sent to the jail but he never discourages himself and continued fighting for national freedom.He is the real father of our nation who really used his all power to make us free from the British rule. He truly understood the power of unity in people (from different castes, religions, community, race, age or gender) which he used all through his independence movement. Finally he forced Britishers to quit India forever through his mass movements on 15th of August in 1947. Since 1947, the 15th of August is celebrated every year as the Independence Day in India.He could not continue his life after the independence of India in 1947 as he was assassinated by one of the Hindu activists, Nathuram Godse in 1948 on 30th of January. He was the great personality who served his whole life till death for the motherland. He enlightened our life with the true light of freedom from British rule. He proved that everything is possible with the non-violence and unity of people. Even after getting died many years ago, he is still alive in the heart of every Indian as a “Father of the Nation and Bapu”.\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [],
   "source": [
    "nlp = spacy.load('en')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Build an NLP Object\n",
    "docx = nlp(document1)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Tokenization of Text\n",
    "mytokens = [token.text for token in docx]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Build Word Frequency\n",
    "# word.text is tokenization in spacy\n",
    "word_frequencies = {}\n",
    "for word in docx:\n",
    "    if word.text not in stopwords:\n",
    "            if word.text not in word_frequencies.keys():\n",
    "                word_frequencies[word.text] = 1\n",
    "            else:\n",
    "                word_frequencies[word.text] += 1"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'Mahatma': 1,\n",
       " 'Gandhi': 1,\n",
       " 'great': 4,\n",
       " 'freedom': 5,\n",
       " 'fighter': 1,\n",
       " 'spent': 2,\n",
       " 'life': 6,\n",
       " 'struggle': 1,\n",
       " 'independence': 3,\n",
       " 'India': 4,\n",
       " '.': 16,\n",
       " 'He': 9,\n",
       " 'born': 1,\n",
       " 'Indian': 3,\n",
       " 'Hindu': 2,\n",
       " 'family': 1,\n",
       " '2nd': 1,\n",
       " 'October': 1,\n",
       " '1869': 1,\n",
       " 'Porbander': 1,\n",
       " ',': 8,\n",
       " 'Gujarat': 1,\n",
       " 'lived': 1,\n",
       " 'leader': 1,\n",
       " 'people': 3,\n",
       " 'His': 1,\n",
       " 'story': 1,\n",
       " 'inspiration': 1,\n",
       " 'called': 1,\n",
       " 'Bapu': 2,\n",
       " 'Rashtrapita': 1,\n",
       " 'fighting': 3,\n",
       " 'British': 3,\n",
       " 'rule': 3,\n",
       " 'While': 1,\n",
       " 'Britishers': 2,\n",
       " 'took': 1,\n",
       " 'help': 1,\n",
       " 'weapons': 1,\n",
       " 'like': 1,\n",
       " 'non': 2,\n",
       " '-': 2,\n",
       " 'violence': 2,\n",
       " 'Satyagraha': 1,\n",
       " 'movements': 2,\n",
       " 'achieve': 1,\n",
       " 'Many': 1,\n",
       " 'times': 1,\n",
       " 'got': 1,\n",
       " 'arrested': 1,\n",
       " 'sent': 1,\n",
       " 'jail': 1,\n",
       " 'discourages': 1,\n",
       " 'continued': 1,\n",
       " 'national': 1,\n",
       " 'real': 1,\n",
       " 'father': 1,\n",
       " 'nation': 1,\n",
       " 'power': 2,\n",
       " 'free': 1,\n",
       " 'truly': 1,\n",
       " 'understood': 1,\n",
       " 'unity': 2,\n",
       " '(': 1,\n",
       " 'different': 1,\n",
       " 'castes': 1,\n",
       " 'religions': 1,\n",
       " 'community': 1,\n",
       " 'race': 1,\n",
       " 'age': 1,\n",
       " 'gender': 1,\n",
       " ')': 1,\n",
       " 'movement': 1,\n",
       " 'Finally': 1,\n",
       " 'forced': 1,\n",
       " 'quit': 1,\n",
       " 'forever': 1,\n",
       " 'mass': 1,\n",
       " '15th': 2,\n",
       " 'August': 2,\n",
       " '1947': 3,\n",
       " 'Since': 1,\n",
       " 'celebrated': 1,\n",
       " 'year': 1,\n",
       " 'Independence': 1,\n",
       " 'Day': 1,\n",
       " 'continue': 1,\n",
       " 'assassinated': 1,\n",
       " 'activists': 1,\n",
       " 'Nathuram': 1,\n",
       " 'Godse': 1,\n",
       " '1948': 1,\n",
       " '30th': 1,\n",
       " 'January': 1,\n",
       " 'personality': 1,\n",
       " 'served': 1,\n",
       " 'till': 1,\n",
       " 'death': 1,\n",
       " 'motherland': 1,\n",
       " 'enlightened': 1,\n",
       " 'true': 1,\n",
       " 'light': 1,\n",
       " 'proved': 1,\n",
       " 'possible': 1,\n",
       " 'Even': 1,\n",
       " 'getting': 1,\n",
       " 'died': 1,\n",
       " 'years': 1,\n",
       " 'ago': 1,\n",
       " 'alive': 1,\n",
       " 'heart': 1,\n",
       " '“': 1,\n",
       " 'Father': 1,\n",
       " 'Nation': 1,\n",
       " '”': 1}"
      ]
     },
     "execution_count": 29,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "word_frequencies"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Maximum Word Frequency\n",
    "maximum_frequency = max(word_frequencies.values())\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {},
   "outputs": [],
   "source": [
    "for word in word_frequencies.keys():  \n",
    "        word_frequencies[word] = (word_frequencies[word]/maximum_frequency)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'Mahatma': 0.0625,\n",
       " 'Gandhi': 0.0625,\n",
       " 'great': 0.25,\n",
       " 'freedom': 0.3125,\n",
       " 'fighter': 0.0625,\n",
       " 'spent': 0.125,\n",
       " 'life': 0.375,\n",
       " 'struggle': 0.0625,\n",
       " 'independence': 0.1875,\n",
       " 'India': 0.25,\n",
       " '.': 1.0,\n",
       " 'He': 0.5625,\n",
       " 'born': 0.0625,\n",
       " 'Indian': 0.1875,\n",
       " 'Hindu': 0.125,\n",
       " 'family': 0.0625,\n",
       " '2nd': 0.0625,\n",
       " 'October': 0.0625,\n",
       " '1869': 0.0625,\n",
       " 'Porbander': 0.0625,\n",
       " ',': 0.5,\n",
       " 'Gujarat': 0.0625,\n",
       " 'lived': 0.0625,\n",
       " 'leader': 0.0625,\n",
       " 'people': 0.1875,\n",
       " 'His': 0.0625,\n",
       " 'story': 0.0625,\n",
       " 'inspiration': 0.0625,\n",
       " 'called': 0.0625,\n",
       " 'Bapu': 0.125,\n",
       " 'Rashtrapita': 0.0625,\n",
       " 'fighting': 0.1875,\n",
       " 'British': 0.1875,\n",
       " 'rule': 0.1875,\n",
       " 'While': 0.0625,\n",
       " 'Britishers': 0.125,\n",
       " 'took': 0.0625,\n",
       " 'help': 0.0625,\n",
       " 'weapons': 0.0625,\n",
       " 'like': 0.0625,\n",
       " 'non': 0.125,\n",
       " '-': 0.125,\n",
       " 'violence': 0.125,\n",
       " 'Satyagraha': 0.0625,\n",
       " 'movements': 0.125,\n",
       " 'achieve': 0.0625,\n",
       " 'Many': 0.0625,\n",
       " 'times': 0.0625,\n",
       " 'got': 0.0625,\n",
       " 'arrested': 0.0625,\n",
       " 'sent': 0.0625,\n",
       " 'jail': 0.0625,\n",
       " 'discourages': 0.0625,\n",
       " 'continued': 0.0625,\n",
       " 'national': 0.0625,\n",
       " 'real': 0.0625,\n",
       " 'father': 0.0625,\n",
       " 'nation': 0.0625,\n",
       " 'power': 0.125,\n",
       " 'free': 0.0625,\n",
       " 'truly': 0.0625,\n",
       " 'understood': 0.0625,\n",
       " 'unity': 0.125,\n",
       " '(': 0.0625,\n",
       " 'different': 0.0625,\n",
       " 'castes': 0.0625,\n",
       " 'religions': 0.0625,\n",
       " 'community': 0.0625,\n",
       " 'race': 0.0625,\n",
       " 'age': 0.0625,\n",
       " 'gender': 0.0625,\n",
       " ')': 0.0625,\n",
       " 'movement': 0.0625,\n",
       " 'Finally': 0.0625,\n",
       " 'forced': 0.0625,\n",
       " 'quit': 0.0625,\n",
       " 'forever': 0.0625,\n",
       " 'mass': 0.0625,\n",
       " '15th': 0.125,\n",
       " 'August': 0.125,\n",
       " '1947': 0.1875,\n",
       " 'Since': 0.0625,\n",
       " 'celebrated': 0.0625,\n",
       " 'year': 0.0625,\n",
       " 'Independence': 0.0625,\n",
       " 'Day': 0.0625,\n",
       " 'continue': 0.0625,\n",
       " 'assassinated': 0.0625,\n",
       " 'activists': 0.0625,\n",
       " 'Nathuram': 0.0625,\n",
       " 'Godse': 0.0625,\n",
       " '1948': 0.0625,\n",
       " '30th': 0.0625,\n",
       " 'January': 0.0625,\n",
       " 'personality': 0.0625,\n",
       " 'served': 0.0625,\n",
       " 'till': 0.0625,\n",
       " 'death': 0.0625,\n",
       " 'motherland': 0.0625,\n",
       " 'enlightened': 0.0625,\n",
       " 'true': 0.0625,\n",
       " 'light': 0.0625,\n",
       " 'proved': 0.0625,\n",
       " 'possible': 0.0625,\n",
       " 'Even': 0.0625,\n",
       " 'getting': 0.0625,\n",
       " 'died': 0.0625,\n",
       " 'years': 0.0625,\n",
       " 'ago': 0.0625,\n",
       " 'alive': 0.0625,\n",
       " 'heart': 0.0625,\n",
       " '“': 0.0625,\n",
       " 'Father': 0.0625,\n",
       " 'Nation': 0.0625,\n",
       " '”': 0.0625}"
      ]
     },
     "execution_count": 32,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Frequency Table\n",
    "word_frequencies"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 33,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Sentence Tokens\n",
    "sentence_list = [ sentence for sentence in docx.sents ]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Sentence Score via comparrng each word with sentence\n",
    "sentence_scores = {}  \n",
    "for sent in sentence_list:  \n",
    "        for word in sent:\n",
    "            if word.text.lower() in word_frequencies.keys():\n",
    "                if len(sent.text.split(' ')) < 30:\n",
    "                    if sent not in sentence_scores.keys():\n",
    "                        sentence_scores[sent] = word_frequencies[word.text.lower()]\n",
    "                    else:\n",
    "                        sentence_scores[sent] += word_frequencies[word.text.lower()]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 35,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{Mahatma Gandhi was a great freedom fighter who spent his whole life in struggle for the independence of India.: 2.375,\n",
       " He was born in the Indian Hindu family on 2nd of October in 1869 in the Porbander, Gujarat.: 1.75,\n",
       " He lived his whole as a leader of the Indian people.: 1.3125,\n",
       " His whole life story is a great inspiration for us.: 1.75,\n",
       " He is called as the Bapu or Rashtrapita as he spent his life in fighting against British rule for the freedom of us.: 2.25,\n",
       " While fighting with Britishers he took help of his great weapons like non-violence and Satyagraha movements to achieve freedom.: 2.5625,\n",
       " Many times he got arrested and sent to the jail but he never discourages himself and continued fighting for national freedom.: 2.0,\n",
       " He is the real father of our nation who really used his all power to make us free from the British rule.: 1.5625,\n",
       " He truly understood the power of unity in people (from different castes, religions, community, race, age or gender) which he used all through his independence movement.: 4.375,\n",
       " Finally he forced Britishers to quit India forever through his mass movements on 15th of August in 1947.: 1.6875,\n",
       " Since 1947, the 15th of August is celebrated every year as the Independence Day in India.: 2.125,\n",
       " He was the great personality who served his whole life till death for the motherland.: 1.9375,\n",
       " He enlightened our life with the true light of freedom from British rule.: 2.0625,\n",
       " He proved that everything is possible with the non-violence and unity of people.: 1.8125,\n",
       " Even after getting died many years ago, he is still alive in the heart of every Indian as a “Father of the Nation and Bapu”.: 2.125}"
      ]
     },
     "execution_count": 35,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Sentence Score Table\n",
    "sentence_scores\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 36,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Import Heapq \n",
    "from heapq import nlargest"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 37,
   "metadata": {},
   "outputs": [],
   "source": [
    "summarized_sentences = nlargest(7, sentence_scores, key=sentence_scores.get)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 38,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[He truly understood the power of unity in people (from different castes, religions, community, race, age or gender) which he used all through his independence movement.,\n",
       " While fighting with Britishers he took help of his great weapons like non-violence and Satyagraha movements to achieve freedom.,\n",
       " Mahatma Gandhi was a great freedom fighter who spent his whole life in struggle for the independence of India.,\n",
       " He is called as the Bapu or Rashtrapita as he spent his life in fighting against British rule for the freedom of us.,\n",
       " Since 1947, the 15th of August is celebrated every year as the Independence Day in India.,\n",
       " Even after getting died many years ago, he is still alive in the heart of every Indian as a “Father of the Nation and Bapu”.,\n",
       " He enlightened our life with the true light of freedom from British rule.]"
      ]
     },
     "execution_count": 38,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "summarized_sentences"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 39,
   "metadata": {},
   "outputs": [],
   "source": [
    "# List Comprehension of Sentences Converted From Spacy.span to strings\n",
    "final_sentences = [ w.text for w in summarized_sentences ]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 40,
   "metadata": {},
   "outputs": [],
   "source": [
    "summary = ' '.join(final_sentences)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 41,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'He truly understood the power of unity in people (from different castes, religions, community, race, age or gender) which he used all through his independence movement. While fighting with Britishers he took help of his great weapons like non-violence and Satyagraha movements to achieve freedom. Mahatma Gandhi was a great freedom fighter who spent his whole life in struggle for the independence of India. He is called as the Bapu or Rashtrapita as he spent his life in fighting against British rule for the freedom of us. Since 1947, the 15th of August is celebrated every year as the Independence Day in India. Even after getting died many years ago, he is still alive in the heart of every Indian as a “Father of the Nation and Bapu”. He enlightened our life with the true light of freedom from British rule.'"
      ]
     },
     "execution_count": 41,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "summary"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.2"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
